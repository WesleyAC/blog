<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Wesley Aptekar-Cassels | Parametric SVG with Genshi</title>
  <meta name="description" content="Using Python + Genshi to generate parametric SVG files for lasercutting">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preload" href="/fonts/Harriet-v2-Text-Regular-latin1.woff2" as="font" type="font/woff2">
  <link rel="preload" href="/fonts/Harriet-v2-Text-Regular-Italic-latin1.woff2" as="font" type="font/woff2">
  <link rel="preload" href="/fonts/Harriet-v2-Text-Bold-latin1.woff2" as="font" type="font/woff2">
  <link rel="preload" href="/fonts/LatoLatin-Regular.woff2" as="font" type="font/woff2">

  <meta property="og:title" content="Parametric SVG with Genshi">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/posts/parametric-svg-with-genshi">
  <meta property="og:description" content="Using Python + Genshi to generate parametric SVG files for lasercutting">
  <meta property="og:site_name" content="Wesley Aptekar-Cassels">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/posts/parametric-svg-with-genshi">
  <meta name="twitter:title" content="Parametric SVG with Genshi">
  <meta name="twitter:description" content="Using Python + Genshi to generate parametric SVG files for lasercutting">

  <link href="/feed.xml" type="application/rss+xml" rel="alternate" title="Wesley Aptekar-Cassels Last 10 blog posts" />

  <link type="text/css" rel="stylesheet" href="/light.css">
  <link type="text/css" rel="stylesheet" href="/dark.css">
</head>

<body>
  <main>
    <nav class="header-nav">
  <a href="/" class="header-logo" title="Wesley Aptekar-Cassels">Wesley Aptekar-Cassels</a>
  <div class="header-links">
    <a href="/feed.xml" target="_blank" title="RSS">
      <div style="width:16px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M56 336c31 0 56 25 56 56s-25 56-56 56-56-25-56-56 25-56 56-56zM0 192c140 0 256 116 256 256h-80c0-48-14-94-48-128S48 272 0 272v-80zM0 64c212 0 384 172 384 384h-80c0-171-133-304-304-304V64z"/></svg></div>
    </a>
    <a href="mailto:me@wesleyac.com" target="_blank" title="Email">
      <div style="width:18px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M422 407c-24 25-52 43-85 55s-69 18-105 18c-35 0-66-6-95-17s-53-26-73-46-36-43-47-71-17-58-17-90 6-62 18-89 29-51 50-71 46-35 74-47c28-11 58-17 90-17 28 0 55 4 81 12s49 20 69 36 36 36 48 60 18 53 18 85c0 24-3 46-10 64s-16 34-27 46-24 22-38 28-29 10-45 10-29-4-39-12-15-17-15-29h-3c-6 10-15 19-28 28s-28 13-46 13c-28 0-49-9-64-27s-23-42-23-71c0-17 3-34 9-50s14-31 24-44 23-23 38-31 31-12 49-12c15 0 27 4 38 10 10 6 18 15 21 24h1l5-24h54l-24 113c-1 6-2 12-3 19s-2 13-2 19c0 7 1 13 4 18s7 7 15 7c16 0 29-9 39-26s16-40 16-68c0-24-4-45-12-64s-20-34-34-47-32-23-52-29-41-9-65-9c-26 0-49 4-70 13s-39 22-54 38-27 34-35 56c-8 21-13 44-13 69 0 26 4 51 13 72s21 39 37 54 35 27 57 35 46 12 72 12c33 0 61-6 85-16s45-25 65-43zM231 188c-10 0-18 2-25 8s-14 13-19 22-8 18-11 28-4 20-4 30c0 5 0 10 1 16 1 5 3 10 6 15s7 8 12 11 11 5 19 5c11 0 20-3 28-8s14-13 19-21 9-16 11-26 3-19 3-27c0-6 0-13-1-19s-4-12-7-17-7-9-12-12-12-5-20-5z"/></svg></div>
    </a>
    <a href="https://github.com/WesleyAC" target="_blank" title="GitHub">
      <div style="width:18px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 32c124 0 224 103 224 230 0 101-64 188-153 218h-4c-8 0-12-7-12-12 0-8 1-31 1-62 0-21-8-36-16-43 50-6 103-25 103-113 0-25-9-46-23-62 2-6 10-29-2-61h-5c-8 0-27 3-57 24-18-5-37-8-56-8s-38 3-56 8c-30-21-49-24-57-24h-5c-12 32-4 55-2 61-14 16-23 37-23 62 0 88 52 107 102 113-6 6-12 16-14 31-6 3-16 6-26 6-13 0-28-5-39-25 0 0-13-22-35-24-2 0-21 0-1 14 0 0 15 8 25 34 0 0 10 33 53 33 7 0 14 0 22-2v39c0 5-3 11-11 11h-4C64 450 0 364 0 262 0 135 100 32 224 32z"/></svg></div>
    </a>
  </div>
</nav>

    <article>
      <header class="article-header">
        <h1>Parametric SVG with Genshi</h1>
        <div class="article-list-date">
          Jul 18, 2017
        </div>
      </header>

      <div class="article-content">
        <p>Parametric CAD (Computer Aided Design) is designing 3d models with various parameters that can be tweaked without having to redesign an entire model. This is very convenient, especially for 3d printing, and there are many tools that allow parametric 3d modeling (<a href="http://www.openscad.org/">OpenSCAD</a>, <a href="https://www.freecadweb.org/">FreeCAD</a>, and some proprietary tools). However, 2d parametric CAD tools (for laser cutting, CNC routing, etc) are much harder to come by. This post is about how I set up a parametric SVG system for generating parts for a laser cutter.</p>

<p>There exist <a href="https://github.com/t-oster/VisiCut/wiki/Parametric-SVG">various</a> <a href="http://www.schepers.cc/w3c/svg/params/ref.html">parametric</a> <a href="http://parametric-svg.js.org/">svg</a> implementations, but none of them fit my criteria:</p>

<ul>
<li>Support a standalone tool to output a svg with new parameters (no web browser/etc).</li>
<li>Has support for mathematical functions like sine, cosine, etc.</li>
<li>Be relatively easy to use</li>
</ul>

<p>So instead, I decided to roll my own. I&#39;m using <a href="https://genshi.edgewall.org/">Genshi</a> with a simple python script to edit parameters. Here&#39;s an example of what this looks like:</p>
<div class="highlight"><pre><code class="language-svg" data-lang="svg">&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"&gt;

&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:py="http://genshi.edgewall.org/" width="100" height="100"&gt;
  &lt;circle cx="50" cy="50" r="${radius}" stroke="black" stroke-width="1" fill="none" /&gt;
&lt;/svg&gt;
</code></pre></div>
<p>That just makes a circle with a user-definable radius.</p>

<p>Here&#39;s an example of a real application of this technique being used to generate a model of a <a href="https://en.wikipedia.org/wiki/Rotary_encoder">quadrature encoder</a>:</p>

<p><img src="../img/psvg/encoder.svg" alt="A parametric Quadrature Encoder"></p>

<p>And by changing just a few lines of code, I can get this:</p>

<p><img src="../img/psvg/encoder32.svg" alt="A parametric Quadrature Encoder with more resolution"></p>

<p>The code for this is <a href="https://github.com/WesleyAC/toybox/blob/master/pcad/encoder.svg?short_path=ffab2e8">on github</a>, if you want to make some encoders yourself :)</p>

<p>Overall, I&#39;ve been quite happy with the technique of using Genshi to generate parametric SVG files - it&#39;s very low overhead, and I have access to all of python, should I want it.</p>

      </div>

      <br>
      <!--
ooops, coronavirus happened, guess we're not doing this anymore :(
hopefully someday...
<p>If you're in NYC and want to meet up over lunch/coffee to chat about the future of technology, <a href="mailto:me@wesleyac.com">get in touch with me</a>.</p>
-->

      <br>
    </article>
  </main>
  <script async src="/mathjax/MathJax.js?config=TeX-MML-AM_CHTML"></script> 
</body>
</html>
