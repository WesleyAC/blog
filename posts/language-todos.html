<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Wesley Aptekar-Cassels | Languages I want to write</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preload" href="/fonts/Harriet-v2-Text-Regular-latin1.woff2" as="font" type="font/woff2">
  <link rel="preload" href="/fonts/Harriet-v2-Text-Regular-Italic-latin1.woff2" as="font" type="font/woff2">
  <link rel="preload" href="/fonts/Harriet-v2-Text-Bold-latin1.woff2" as="font" type="font/woff2">
  <link rel="preload" href="/fonts/LatoLatin-Regular.woff2" as="font" type="font/woff2">

  <meta property="og:title" content="Languages I want to write">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/posts/language-todos">
  <meta property="og:description" content="">
  <meta property="og:site_name" content="Wesley Aptekar-Cassels">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/posts/language-todos">
  <meta name="twitter:title" content="Languages I want to write">
  <meta name="twitter:description" content="">

  <link href="/feed.xml" type="application/rss+xml" rel="alternate" title="Wesley Aptekar-Cassels Last 10 blog posts" />

  <link type="text/css" rel="stylesheet" href="/light.css">
  <link type="text/css" rel="stylesheet" href="/dark.css">
</head>

<body>
  <main>
    <nav class="header-nav">
  <a href="/" class="header-logo" title="Wesley Aptekar-Cassels">Wesley Aptekar-Cassels</a>
  <div class="header-links">
    <a href="/feed.xml" target="_blank" title="RSS">
      <div style="width:16px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M56 336c31 0 56 25 56 56s-25 56-56 56-56-25-56-56 25-56 56-56zM0 192c140 0 256 116 256 256h-80c0-48-14-94-48-128S48 272 0 272v-80zM0 64c212 0 384 172 384 384h-80c0-171-133-304-304-304V64z"/></svg></div>
    </a>
    <a href="mailto:me@wesleyac.com" target="_blank" title="Email">
      <div style="width:18px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M422 407c-24 25-52 43-85 55s-69 18-105 18c-35 0-66-6-95-17s-53-26-73-46-36-43-47-71-17-58-17-90 6-62 18-89 29-51 50-71 46-35 74-47c28-11 58-17 90-17 28 0 55 4 81 12s49 20 69 36 36 36 48 60 18 53 18 85c0 24-3 46-10 64s-16 34-27 46-24 22-38 28-29 10-45 10-29-4-39-12-15-17-15-29h-3c-6 10-15 19-28 28s-28 13-46 13c-28 0-49-9-64-27s-23-42-23-71c0-17 3-34 9-50s14-31 24-44 23-23 38-31 31-12 49-12c15 0 27 4 38 10 10 6 18 15 21 24h1l5-24h54l-24 113c-1 6-2 12-3 19s-2 13-2 19c0 7 1 13 4 18s7 7 15 7c16 0 29-9 39-26s16-40 16-68c0-24-4-45-12-64s-20-34-34-47-32-23-52-29-41-9-65-9c-26 0-49 4-70 13s-39 22-54 38-27 34-35 56c-8 21-13 44-13 69 0 26 4 51 13 72s21 39 37 54 35 27 57 35 46 12 72 12c33 0 61-6 85-16s45-25 65-43zM231 188c-10 0-18 2-25 8s-14 13-19 22-8 18-11 28-4 20-4 30c0 5 0 10 1 16 1 5 3 10 6 15s7 8 12 11 11 5 19 5c11 0 20-3 28-8s14-13 19-21 9-16 11-26 3-19 3-27c0-6 0-13-1-19s-4-12-7-17-7-9-12-12-12-5-20-5z"/></svg></div>
    </a>
    <a href="https://github.com/WesleyAC" target="_blank" title="GitHub">
      <div style="width:18px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 32c124 0 224 103 224 230 0 101-64 188-153 218h-4c-8 0-12-7-12-12 0-8 1-31 1-62 0-21-8-36-16-43 50-6 103-25 103-113 0-25-9-46-23-62 2-6 10-29-2-61h-5c-8 0-27 3-57 24-18-5-37-8-56-8s-38 3-56 8c-30-21-49-24-57-24h-5c-12 32-4 55-2 61-14 16-23 37-23 62 0 88 52 107 102 113-6 6-12 16-14 31-6 3-16 6-26 6-13 0-28-5-39-25 0 0-13-22-35-24-2 0-21 0-1 14 0 0 15 8 25 34 0 0 10 33 53 33 7 0 14 0 22-2v39c0 5-3 11-11 11h-4C64 450 0 364 0 262 0 135 100 32 224 32z"/></svg></div>
    </a>
  </div>
</nav>

    <article>
      <header class="article-header">
        <h1>Languages I want to write</h1>
        <div class="article-list-date">
          Apr 12, 2019
        </div>
      </header>

      <div class="article-content">
        <p>I spent this weekend writing a Forth designed for music synthesis, and it reminded me what a joy writing programming languages is! I have a big list of programming language experiments that I want to try, but it&#39;s mostly been in my head so far. Here&#39;s a living document of some of the languages I want to write.</p>

<h3>A language with dependent types and borrow checking</h3>

<p>A <a href="https://en.wikipedia.org/wiki/Dependent_type">dependent type system</a> is one where a type can depend on a value - for instance, a function&#39;s return type could depend on the value of one of its arguments. <a href="https://www.idris-lang.org/">Idris</a> is perhaps the most famous dependently typed language.</p>

<p>Having dependent types allows for a huge amount of expressivity at the type level, preventing runtime bugs.</p>

<p>However, all current dependently typed languages are garbage collected.</p>

<p><a href="https://www.rust-lang.org/">Rust</a> is the first (well-known) language to not use either garbage collection or manual memory management, instead relying on borrow-checking to allocate and free memory. <a href="https://github.com/carp-lang/Carp">Carp</a> is a lisp that uses a borrow checker (they call it a &quot;<a href="https://github.com/carp-lang/Carp/blob/master/docs/Memory.md">lifetime analyzer</a>&quot;) for memory management, and compiles to C.</p>

<p>It would be interesting to combine dependent types and borrow checking.</p>

<p>Some useful places to start with this:</p>

<ul>
<li><a href="https://www.andres-loeh.de/LambdaPi/LambdaPi.pdf">A tutorial implementation of a dependently typed lambda calculus</a></li>
<li><a href="https://pdfs.semanticscholar.org/1407/220ca09070233dca256433430d29e5321dc2.pdf">The Idris paper</a></li>
<li><a href="https://arxiv.org/pdf/1903.00982.pdf">Oxide: The Essence of Rust</a></li>
<li><a href="https://github.com/carp-lang/Carp/blob/master/docs/Memory.md">The Carp docs</a></li>
<li><a href="http://math.andrej.com/2012/11/08/how-to-implement-dependent-type-theory-i/">How to implement dependent type theory</a></li>
</ul>

<p>It&#39;s probably incredibly hard to make a language like this ergonomic and performant, but I think it&#39;s an important design space to explore.</p>

<h3>A productionized stream processing language</h3>

<p>When I started working at Google, saw that everything was protobufs, and I assumed that the tools for dealing with protobufs would be amazing. Turns out, nope, you&#39;re writing thousands of lines of <a href="https://github.com/google/guice">guiced</a> up Java to perform what are, conceptually, simple transformations of protobufs.</p>

<p><a href="https://stedolan.github.io/jq/">jq</a> is a stream processing language for JSON - it allows you to easily express transformations of JSON. (<a href="https://github.com/jzelinskie/faq">faq</a> is another cool tool in this space, although I haven&#39;t tried it yet)</p>

<p>I want to be able to write servers in jq, except communicating in a typed format that has a real schema. The real work here is tying this together with a DB and reasonable frontend framework, but I think there&#39;s something interesting in the idea of jq with types.</p>

<h3>An effect system for Forth</h3>

<p>It&#39;d be interesting to write an effect system for Forth - there&#39;s already been plenty of research into <a href="https://www.kodu.ee/%7Ejpoial/teadus/EuroForth90_Algebraic.pdf">analyzing the stack effects of forth words</a> - it seems like interesting design space to use these as annotations for forth words, MyPy style. I&#39;m not sure exactly what effects one would care about for forth - the most obvious are stack effects, but forth seems like an interesting playground for all sorts of taint-tracking things.</p>

<h3>A python-esque language with algebraic data types</h3>

<p><a href="https://en.wikipedia.org/wiki/Algebraic_data_type">Algebraic data types</a> allow you to express many types of data in your type system.</p>

<p>Python is a wonderful scripting language, and is the language that I can most quickly throw together scripts in, but the lack of typing makes it untenable for large programs, and unpleasant for small ones.</p>

<p>I&#39;d love to have a python-esque language with algebraic data types. Some people tell me that <a href="https://www.pyret.org/index.html">Pyret</a> is this, so I should probably look at that first.</p>

<p>Also, it&#39;d be amazing if it compiled to WASM - a major pain with python is that it&#39;s super hard to distribute. I often end up writing javascript just because it&#39;s easier to share, but that makes me sad :(</p>

<h3>A lisp that compiles to C++ template metaprograms</h3>

<p>C++ template metaprogramming feels surprisingly like writing a functional language - most everything is immutable, and recursion is the only looping.</p>

<p>It seems to me that it shouldn&#39;t be too much effort to write a Lisp that compiles down to C++ templates. I started writing this at the <a href="https://www.recurse.com/">Recurse Center</a> (and got as far as compiling prefix notation arithmetic expressions), but put it down. I&#39;d love to return to it some day.</p>

<p>I don&#39;t think this would be useful, but it would be hilarious.</p>

<h3>A structurally edited language with no names</h3>

<p>A language where functions are referred to by a hash of the computation that they perform, rather than by name. Bindings are similarly referred to by hash. You may have an alias file, which provides names for functions, but no names are canonical.</p>

<p>This has a few benefits:</p>

<ul>
<li>Languages are trivially internationalized - one can simply look at the same program with an alias file in a different language</li>
<li>Dependency versioning is easy - your dependency versions are specified by the hashs of the functions you call. Simple tooling (search and replace, essentially) would allow updating dependencies</li>
<li>Linking is easier - no more <code>__load_bearing</code> functions and name mangling </li>
</ul>

<p>This should be structurally edited to allow for better tooling around showing aliases, etc.</p>

<p><a href="https://twitter.com/ra">Ramsey Nasser</a> gave a very good talk about this at <a href="https://www.deconstructconf.com/">Deconstruct 2019</a>. The video is not yet posted (as of Sept 2019), but it&#39;s based on <a href="http://ojs.decolonising.digital/index.php/decolonising_digital/article/view/PersonalComputer">this paper</a>.</p>

<h1>Why write languages?</h1>

<p>I think that a lot of people are confused as to why people write programming languages - we have so many already, what could the new programming language you&#39;re writing possibly bring to the table? But in reality, there&#39;s a <em>ton</em> of design space in programming languages that hasn&#39;t been explored yet! It&#39;s important that we continue to explore this space, not because every language will be good, but because some of them might bring new ideas to the table, or cause us to see how a combination of old ideas is amazing together. No one knows what it&#39;d be like to program in a borrow-checked language with dependent types, because there isn&#39;t one that exists!</p>

<p>Also, writing a programming language can be a lot of fun! It really demystifies what a &quot;programming language&quot; actually is, and what computers are actually doing. (If writing a programming language seems scary, I&#39;d recommend reading &quot;<a href="http://composition.al/blog/2017/07/31/my-first-fifteen-compilers/">My first fifteen compilers</a>&quot; by Lindsey Kuper - it turns out that compilers (and programming languages) come at all different levels of complexity, and you can probably implement a very simple compiler or language in a few days!)</p>

<p>I wish more people were writing strange programming languages, or at least talking about what programming languages they want to write. What programming languages do you want to see?</p>

<p><strong>Last update: 21 June 2019</strong></p>

      </div>

      <br>
      <!--
ooops, coronavirus happened, guess we're not doing this anymore :(
hopefully someday...
<p>If you're in NYC and want to meet up over lunch/coffee to chat about the future of technology, <a href="mailto:me@wesleyac.com">get in touch with me</a>.</p>
-->

      <br>
    </article>
  </main>
  <script async src="/mathjax/MathJax.js?config=TeX-MML-AM_CHTML"></script> 
</body>
</html>
